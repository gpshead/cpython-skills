---
name: cpython-navigation
description: Use this skill when you need to understand the CPython source code structure, find where specific functionality is implemented (C runtime, stdlib, tests, docs), or understand the relationship between different parts of the codebase like modules and their tests.
---

# CPython Source Code Navigation

## Purpose

This skill helps you navigate the CPython codebase structure, understanding where different components are located and how they relate to each other.

## Source Code Structure

### Python Standard Library (`Lib/`)
- The Python standard library (stdlib) itself lives in the `Lib/` tree
- Pure Python implementations of stdlib modules
- Example: `Lib/zipfile.py` contains the `zipfile` module

### C Extension Modules (`Modules/`)
- stdlib C extension modules live in the `Modules/` tree
- Written in C for performance or low-level system access
- Example: `Modules/_csv.c` contains the C implementation of the `csv` module

### Runtime and Core Types (`Objects/` and `Python/`)
- Builtins, objects, and the runtime itself live in `Objects/` and `Python/`
- Core Python type implementations (list, dict, int, etc.)
- Interpreter loop and execution engine

### C Header Files (`Include/`)
- C header files are in the `Include/` tree
- Public and internal C API declarations

### Tests (`Lib/test/`)
- Unittests for everything live in the `Lib/test/` tree
- Test naming convention: `test_{module_name}.py` or `test_{module_name}/`

#### Test Mapping Examples
| Code Location | Test Location |
|--------------|---------------|
| `Lib/zipfile.py` | `Lib/test/test_zipfile**` |
| `Modules/_csv.c` | `Lib/test/test_csv.py` |
| `Lib/asyncio/` | `Lib/test/test_asyncio/` |

#### Test Package Structure
- Some tests are packages rather than a single .py file
- Test packages require `load_tests()` logic in their `test_package/__init__.py` file
- This is necessary for the tests to work via `python -m test` commands

### Documentation (`Doc/`)
- Documentation is written in .rst (reStructuredText) format in `Doc/`
- This is the source for the official Python documentation at python.org
- Build output goes to `Doc/build/`

### Internal Documentation
- CPython internals are documented for maintainers in `InternalDocs/README.md`
- Start here when learning about internal implementation details

### Build Tools (`Tools/`)
- Build-time tools such as Argument Clinic live under the `Tools/` tree
- Various utilities for development and release management

## Argument Clinic

### What is Argument Clinic?
- Generates C boilerplate code for argument parsing in C extension modules
- Input: Specially formatted comments in `.c` files
- Output: Generated code in `**/clinic/**` subdirectories

### Critical Rule
**NEVER edit files in a `**/clinic/**` subdirectory** - those files are auto-generated by Argument Clinic!

### Workflow
1. Edit the source `.c` file with Argument Clinic syntax
2. Run `make -C BUILD_DIR clinic` to regenerate
3. Changes to function signatures or docstrings require regeneration

## Scratch Space

**NEVER create throwaway exploration files in the top directory of the repo.**

Instead, use `.claude/sandbox/` directory for:
- Idea exploration files
- Temporary test scripts
- Quick prototypes
- These files will never be committed (should be in .gitignore)

## Finding Your Way Around

### Looking for stdlib functionality?
1. Check `Lib/{module_name}.py` first (pure Python)
2. If not there, check `Modules/_{module_name}.c` (C extension)
3. Some modules split between Python and C

### Looking for tests?
1. Check `Lib/test/test_{module_name}.py` (single file)
2. Or `Lib/test/test_{module_name}/` (package)

### Looking for core types or builtins?
- Check `Objects/` for type implementations
- Check `Python/` for interpreter code

### Looking for C API?
- Check `Include/` for header files
- Check `InternalDocs/` for implementation notes

## Integration with Other Skills

For specific tasks, use:
- **cpython-build**: Building and compiling CPython
- **cpython-testing**: Running tests
- **cpython-code-style**: Code formatting and style guidelines
